var newgrounds=(()=>{var de=Object.defineProperty;var S=(i,c)=>de(i,"name",{value:c,configurable:!0}),F=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(c,a)=>(typeof require!="undefined"?require:c)[a]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var A=(i,c)=>()=>(i&&(c=i(i=0)),c);var ue=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports);function Z(i){(function(c,a){typeof exports=="object"?module.exports=exports=a():typeof define=="function"&&define.amd?define([],a):i.CryptoJS=a()})(0,function(){var c=c||function(a,y){var o;if(typeof window!="undefined"&&window.crypto&&(o=window.crypto),!o&&typeof window!="undefined"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof global!="undefined"&&global.crypto&&(o=global.crypto),!o&&typeof F=="function")try{o=F("crypto")}catch(n){}var f=S(function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch(n){}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch(n){}}throw new Error("Native crypto module could not be used to get secure random number.")},"i"),m=Object.create||function(){function n(){}return S(n,"t"),function(h){var _;return n.prototype=h,_=new n,n.prototype=null,_}}(),x={},w=x.lib={},g=w.Base={extend:function(n){var h=m(this);return n&&h.mixIn(n),h.hasOwnProperty("init")&&this.init!==h.init||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var h in n)n.hasOwnProperty(h)&&(this[h]=n[h]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}},C=w.WordArray=g.extend({init:function(n,h){n=this.words=n||[],this.sigBytes=h!=null?h:4*n.length},toString:function(n){return(n||Hex).stringify(this)},concat:function(n){var h=this.words,_=n.words,p=this.sigBytes,l=n.sigBytes;if(this.clamp(),p%4)for(var d=0;d<l;d++){var k=_[d>>>2]>>>24-d%4*8&255;h[p+d>>>2]|=k<<24-(p+d)%4*8}else for(d=0;d<l;d+=4)h[p+d>>>2]=_[d>>>2];return this.sigBytes+=l,this},clamp:function(){var n=this.words,h=this.sigBytes;n[h>>>2]&=4294967295<<32-h%4*8,n.length=a.ceil(h/4)},clone:function(){var n=g.clone.call(this);return n.words=this.words.slice(0),n},random:function(n){for(var h=[],_=0;_<n;_+=4)h.push(f());return new C.init(h,n)}}),B=x.enc={},D=B.Latin1={stringify:function(n){for(var h=n.words,_=n.sigBytes,p=[],l=0;l<_;l++){var d=h[l>>>2]>>>24-l%4*8&255;p.push(String.fromCharCode(d))}return p.join("")},parse:function(n){for(var h=n.length,_=[],p=0;p<h;p++)_[p>>>2]|=(255&n.charCodeAt(p))<<24-p%4*8;return new C.init(_,h)}},E=B.Utf8={stringify:function(n){try{return decodeURIComponent(escape(D.stringify(n)))}catch(h){throw new Error("Malformed UTF-8 data")}},parse:function(n){return D.parse(unescape(encodeURIComponent(n)))}};return w.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=E.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(n){var h,_=this._data,p=_.words,l=_.sigBytes,d=this.blockSize,k=l/(4*d),e=(k=n?a.ceil(k):a.max((0|k)-this._minBufferSize,0))*d,r=a.min(4*e,l);if(e){for(var u=0;u<e;u+=d)this._doProcessBlock(p,u);h=p.splice(0,e),_.sigBytes-=r}return new C.init(h,r)},clone:function(){var n=g.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),x.algo={},x}(Math);return function(){var a=c,y=a.lib.WordArray;a.enc.Base64={stringify:function(o){var f=o.words,m=o.sigBytes,x=this._map;o.clamp();for(var w=[],g=0;g<m;g+=3)for(var C=(f[g>>>2]>>>24-g%4*8&255)<<16|(f[g+1>>>2]>>>24-(g+1)%4*8&255)<<8|f[g+2>>>2]>>>24-(g+2)%4*8&255,B=0;B<4&&g+.75*B<m;B++)w.push(x.charAt(C>>>6*(3-B)&63));var D=x.charAt(64);if(D)for(;w.length%4;)w.push(D);return w.join("")},parse:function(o){var f=o.length,m=this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var w=0;w<m.length;w++)x[m.charCodeAt(w)]=w}var g=m.charAt(64);if(g){var C=o.indexOf(g);C!==-1&&(f=C)}return function(B,D,E){for(var n=[],h=0,_=0;_<D;_++)if(_%4){var p=E[B.charCodeAt(_-1)]<<_%4*2,l=E[B.charCodeAt(_)]>>>6-_%4*2,d=p|l;n[h>>>2]|=d<<24-h%4*8,h++}return y.create(n,h)}(o,f,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),c.lib.Cipher||function(a){var y=c,o=y.lib,f=o.Base,m=o.WordArray,x=o.BufferedBlockAlgorithm,w=y.enc,g=(w.Utf8,w.Base64),C=y.algo.EvpKDF,B=o.Cipher=x.extend({cfg:f.extend(),createEncryptor:function(e,r){return this.create(this._ENC_XFORM_MODE,e,r)},createDecryptor:function(e,r){return this.create(this._DEC_XFORM_MODE,e,r)},init:function(e,r,u){this.cfg=this.cfg.extend(u),this._xformMode=e,this._key=r,this.reset()},reset:function(){x.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(r){return typeof r=="string"?k:l}return S(e,"t"),function(r){return{encrypt:function(u,t,s){return e(t).encrypt(r,u,t,s)},decrypt:function(u,t,s){return e(t).decrypt(r,u,t,s)}}}}()}),D=(o.StreamCipher=B.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),y.mode={}),E=o.BlockCipherMode=f.extend({createEncryptor:function(e,r){return this.Encryptor.create(e,r)},createDecryptor:function(e,r){return this.Decryptor.create(e,r)},init:function(e,r){this._cipher=e,this._iv=r}}),n=D.CBC=function(){var e=E.extend();function r(u,t,s){var v,b=this._iv;b?(v=b,this._iv=a):v=this._prevBlock;for(var M=0;M<s;M++)u[t+M]^=v[M]}return S(r,"r"),e.Encryptor=e.extend({processBlock:function(u,t){var s=this._cipher,v=s.blockSize;r.call(this,u,t,v),s.encryptBlock(u,t),this._prevBlock=u.slice(t,t+v)}}),e.Decryptor=e.extend({processBlock:function(u,t){var s=this._cipher,v=s.blockSize,b=u.slice(t,t+v);s.decryptBlock(u,t),r.call(this,u,t,v),this._prevBlock=b}}),e}(),h=(y.pad={}).Pkcs7={pad:function(e,r){for(var u=4*r,t=u-e.sigBytes%u,s=t<<24|t<<16|t<<8|t,v=[],b=0;b<t;b+=4)v.push(s);var M=m.create(v,t);e.concat(M)},unpad:function(e){var r=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=r}},_=(o.BlockCipher=B.extend({cfg:B.cfg.extend({mode:n,padding:h}),reset:function(){var e;B.reset.call(this);var r=this.cfg,u=r.iv,t=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,u&&u.words):(this._mode=e.call(t,this,u&&u.words),this._mode.__creator=e)},_doProcessBlock:function(e,r){this._mode.processBlock(e,r)},_doFinalize:function(){var e,r=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(r.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),r.unpad(e)),e},blockSize:4}),o.CipherParams=f.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),p=(y.format={}).OpenSSL={stringify:function(e){var r=e.ciphertext,u=e.salt;return(u?m.create([1398893684,1701076831]).concat(u).concat(r):r).toString(g)},parse:function(e){var r,u=g.parse(e),t=u.words;return t[0]==1398893684&&t[1]==1701076831&&(r=m.create(t.slice(2,4)),t.splice(0,4),u.sigBytes-=16),_.create({ciphertext:u,salt:r})}},l=o.SerializableCipher=f.extend({cfg:f.extend({format:p}),encrypt:function(e,r,u,t){t=this.cfg.extend(t);var s=e.createEncryptor(u,t),v=s.finalize(r),b=s.cfg;return _.create({ciphertext:v,key:u,iv:b.iv,algorithm:e,mode:b.mode,padding:b.padding,blockSize:e.blockSize,formatter:t.format})},decrypt:function(e,r,u,t){return t=this.cfg.extend(t),r=this._parse(r,t.format),e.createDecryptor(u,t).finalize(r.ciphertext)},_parse:function(e,r){return typeof e=="string"?r.parse(e,this):e}}),d=(y.kdf={}).OpenSSL={execute:function(e,r,u,t){t||(t=m.random(8));var s=C.create({keySize:r+u}).compute(e,t),v=m.create(s.words.slice(r),4*u);return s.sigBytes=4*r,_.create({key:s,iv:v,salt:t})}},k=o.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:d}),encrypt:function(e,r,u,t){var s=(t=this.cfg.extend(t)).kdf.execute(u,e.keySize,e.ivSize);t.iv=s.iv;var v=l.encrypt.call(this,e,r,s.key,t);return v.mixIn(s),v},decrypt:function(e,r,u,t){t=this.cfg.extend(t),r=this._parse(r,t.format);var s=t.kdf.execute(u,e.keySize,e.ivSize,r.salt);return t.iv=s.iv,l.decrypt.call(this,e,r,s.key,t)}})}(),function(){var a=c,y=a.lib.BlockCipher,o=a.algo,f=[],m=[],x=[],w=[],g=[],C=[],B=[],D=[],E=[],n=[];(function(){for(var p=[],l=0;l<256;l++)p[l]=l<128?l<<1:l<<1^283;var d=0,k=0;for(l=0;l<256;l++){var e=k^k<<1^k<<2^k<<3^k<<4;e=e>>>8^255&e^99,f[d]=e,m[e]=d;var r=p[d],u=p[r],t=p[u],s=257*p[e]^16843008*e;x[d]=s<<24|s>>>8,w[d]=s<<16|s>>>16,g[d]=s<<8|s>>>24,C[d]=s,s=16843009*t^65537*u^257*r^16843008*d,B[e]=s<<24|s>>>8,D[e]=s<<16|s>>>16,E[e]=s<<8|s>>>24,n[e]=s,d?(d=r^p[p[p[t^r]]],k^=p[p[k]]):d=k=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,l=p.words,d=p.sigBytes/4,k=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],r=0;r<k;r++)r<d?e[r]=l[r]:(s=e[r-1],r%d?d>6&&r%d==4&&(s=f[s>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[255&s]):(s=f[(s=s<<8|s>>>24)>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[255&s],s^=h[r/d|0]<<24),e[r]=e[r-d]^s);for(var u=this._invKeySchedule=[],t=0;t<k;t++){if(r=k-t,t%4)var s=e[r];else s=e[r-4];u[t]=t<4||r<=4?s:B[f[s>>>24]]^D[f[s>>>16&255]]^E[f[s>>>8&255]]^n[f[255&s]]}}},encryptBlock:function(p,l){this._doCryptBlock(p,l,this._keySchedule,x,w,g,C,f)},decryptBlock:function(p,l){var d=p[l+1];p[l+1]=p[l+3],p[l+3]=d,this._doCryptBlock(p,l,this._invKeySchedule,B,D,E,n,m),d=p[l+1],p[l+1]=p[l+3],p[l+3]=d},_doCryptBlock:function(p,l,d,k,e,r,u,t){for(var s=this._nRounds,v=p[l]^d[0],b=p[l+1]^d[1],M=p[l+2]^d[2],O=p[l+3]^d[3],z=4,Y=1;Y<s;Y++){var R=k[v>>>24]^e[b>>>16&255]^r[M>>>8&255]^u[255&O]^d[z++],T=k[b>>>24]^e[M>>>16&255]^r[O>>>8&255]^u[255&v]^d[z++],P=k[M>>>24]^e[O>>>16&255]^r[v>>>8&255]^u[255&b]^d[z++],I=k[O>>>24]^e[v>>>16&255]^r[b>>>8&255]^u[255&M]^d[z++];v=R,b=T,M=P,O=I}R=(t[v>>>24]<<24|t[b>>>16&255]<<16|t[M>>>8&255]<<8|t[255&O])^d[z++],T=(t[b>>>24]<<24|t[M>>>16&255]<<16|t[O>>>8&255]<<8|t[255&v])^d[z++],P=(t[M>>>24]<<24|t[O>>>16&255]<<16|t[v>>>8&255]<<8|t[255&b])^d[z++],I=(t[O>>>24]<<24|t[v>>>16&255]<<16|t[b>>>8&255]<<8|t[255&M])^d[z++],p[l]=R,p[l+1]=T,p[l+2]=P,p[l+3]=I},keySize:8});a.AES=y._createHelper(_)}(),c})}var ee=A(()=>{S(Z,"setCrypto")});function U(i,c=0,a={}){var x,w,g,C,B,D,E;this.appID=i,this.cipher=c,Z(this),this.medalDisplayTime=a.medalDisplayTime||5,this.showPopups=a.showPopups||!0,this.showDescriptions=a.showDescriptions||!0,this.debug=a.debug||!1,this.points=[5,10,25,50,100],this.displayMedalQueue=[];let o=new URL(window.location.href);this.sessionID=(x=o.searchParams.get("ngio_session_id"))!=null?x:0;let f=this.call("ScoreBoard.getBoards",0,0);this.scoreboards=(C=(g=(w=f==null?void 0:f.result)==null?void 0:w.data)==null?void 0:g.scoreboards)!=null?C:[];let m=this.call("Medal.getList",0,0);this.medals=(E=(D=(B=m==null?void 0:m.result)==null?void 0:B.data)==null?void 0:D.medals)!=null?E:[];for(let n of this.medals)n.image=new Image,n.image.src=n.icon,this.debug&&(n.unlocked=0)}var te=A(()=>{ee();S(U,"connect")});function j(i){if(!this.medals||!this.medals.find(a=>a.id==i))return;let c=this.medals.find(a=>a.id==i);c.unlocked||(c.unlocked=!0,this.call("Medal.unlock",{id:c.id}))}function J(i){return unescape(i.name+" ("+this.points[i.difficulty-1]+")"+(this.showDescriptions?" - "+i.description:""))}var re=A(()=>{S(j,"unlockMedal");S(J,"getMedalText")});function L(i,c=0,a="A",y=0,o=0,f=10){var w,g;if(!this.scoreboards||!this.scoreboards.find(C=>C.id==i))return;let m=this.scoreboards.find(C=>C.id==i);return(g=(w=this.call("ScoreBoard.getScores",{id:m.id,user:c,period:a,social:y,skip:o,limit:f},0).result)==null?void 0:w.data)==null?void 0:g.scores}function N(i,c){if(!this.scoreboards||!this.scoreboards.find(y=>y.id==i))return;let a=this.scoreboards.find(y=>y.id==i);this.call("ScoreBoard.postScore",{id:a.id,value:c})}var ie=A(()=>{S(L,"getScores");S(N,"postScore")});function pe(i,c,a,y,o,f=.5){if(!this.medals||!this.medals.find(g=>g.id==c))return;i.save(),i.fillStyle="#fff",i.strokeStyle="#000",i.shadowColor="#000",i.textBaseline="middle",i.textAlign="left",i.font=o/2+"px impact",i.lineWidth=o/35,i.shadowBlur=o/5,i.globalAlpha=f;let m=this.medals.find(g=>g.id==c);i.drawImage(m.image,a,y,o,o),i.strokeRect(a,y,o,o);let x=this.points[m.difficulty-1],w=this.getMedalText(m);i.lineWidth=Math.max(1,o/26),i.strokeText(w,a+o*1.2,y+o/2),i.fillText(w,a+o*1.2,y+o/2),i.restore()}function X(i){var c;if((c=this.displayMedalQueue)==null?void 0:c.length){let a=this.displayMedalQueue[0];a.time+=i,a.time>this.medalDisplayTime&&this.displayMedalQueue.shift()}}function G(i,c=50){var a;if((a=this.displayMedalQueue)==null?void 0:a.length){let y=this.displayMedalQueue[0],o=y.time<1?1-y.time:0,f=y.time>this.medalDisplayTime-1?this.medalDisplayTime-y.time:1,m=i.canvas.height+o*c*1.5;pe(i,y.index,0,m-c,c,f)}}var ne=A(()=>{S(pe,"renderMedal");S(X,"update");S(G,"render")});function H(){var c,a,y,o;let i=this.call("App.checkSession");return(o=(y=(a=(c=i==null?void 0:i.result)==null?void 0:c.data)==null?void 0:a.session)==null?void 0:y.user)==null?void 0:o.name}function Q(){var c,a;let i=this.call("App.getCurrentVersion");return(a=(c=i==null?void 0:i.result)==null?void 0:c.data)==null?void 0:a.current_version}function V(){var c,a,y,o;let i=this.call("App.checkSession");return(o=(y=(a=(c=i==null?void 0:i.result)==null?void 0:c.data)==null?void 0:a.session)==null?void 0:y.user)==null?void 0:o.supporter}var se=A(()=>{S(H,"getUsername");S(Q,"getVersion");S(V,"isSupporter")});function W(i){if(!this.cipher)return i;let c=this.CryptoJS.enc.Base64.parse(this.cipher),a=this.CryptoJS.lib.WordArray.random(16),y=this.CryptoJS.AES.encrypt(JSON.stringify(i),c,{iv:a}),o=this.CryptoJS.enc.Base64.stringify(a.concat(y.ciphertext));return i.secure=o,i.parameters=null,i}function q(i,c=!1,a=!0){let y=this.encryptCall({component:i,parameters:c}),o={app_id:this.appID,session_id:this.sessionID,call:y},f=new FormData;f.append("input",JSON.stringify(o));let m=new XMLHttpRequest,x="https://newgrounds.io/gateway_v3.php";if(m.open("POST",x,this.debug?!1:a),m.send(f),m.responseText)return this.debug&&console.log(m.responseText),this.responseText=m.responseText,JSON.parse(m.responseText)}var oe=A(()=>{S(W,"encryptCall");S(q,"call")});function K(i){var y,o,f;let c=this.call("CloudSave.loadSlot",{id:i},!1),a=new XMLHttpRequest;return a.open("GET",(f=(o=(y=c==null?void 0:c.result)==null?void 0:y.data)==null?void 0:o.slot)==null?void 0:f.url,!1),a.send(),a.status==200?a.responseText:"nope."}function $(i,c){return this.call("CloudSave.setData",{id:i,data:c})}var ae=A(()=>{S(K,"getCloudData");S($,"setCloudData")});var he=ue((ze,ce)=>{te();re();ie();ne();se();oe();ae();var le={connect:U,unlockMedal:j,getMedalText:J,getScores:L,postScore:N,update:X,render:G,getUsername:H,getVersion:Q,isSupporter:V,call:q,encryptCall:W,getCloudData:K,setCloudData:$};window.Connect=U;window.UnlockMedal=j;window.GetMedalText=J;window.GetScores=L;window.PostScore=N;window.update=X;window.render=G;window.GetUsername=H;window.GetVersion=Q;window.IsSupporter=V;window.GetCloudData=K;window.SetCloudData=$;window.call=q;window.encryptCall=W;ce.exports=le});return he();})();
